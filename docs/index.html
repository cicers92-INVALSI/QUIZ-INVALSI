<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulazione Prova di Italiano</title>
    
    <style>
        /* Copia qui tutto il contenuto del tuo pannello CSS da JSFiddle */
        .quiz-container { max-width: 850px; margin: 20px auto; background: #ffffff; padding: 25px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); font-family: Arial, sans-serif !important; }
        .quiz-container h1 { text-align: center; color: #dc3545; border-bottom: 3px solid #dc3545; padding-bottom: 12px; margin-bottom: 30px; font-size: 1.8em !important; }
        .quiz-container h2 { color: #333; border-bottom: 1px solid #ccc; padding-bottom: 5px; margin-top: 40px; font-size: 1.5em !important; }
        .testo-lettura { border: 1px solid #ddd; padding: 15px; margin-bottom: 20px; background-color: #fce4e4; border-radius: 6px; font-style: italic; line-height: 1.4; }
        .domanda-blocco { margin-bottom: 30px; padding: 15px; border-left: 5px solid #dc3545; background-color: #f9f9f9; border-radius: 6px; }
        .domanda-blocco h3 { margin-top: 0; color: #dc3545; font-size: 1.1em !important; }
        .opzione-risposta { margin: 8px 0; padding: 12px; border: 1px solid #ddd; border-radius: 4px; cursor: pointer; transition: background-color 0.3s; display: block; }
        .opzione-risposta:hover { background-color: #e9e9e9; }
        
        /* Stili per il timer */
        #timer-display {
            text-align: center; 
            margin-bottom: 20px; 
            font-size: 1.5em !important; 
            font-weight: bold; 
            color: #dc3545;
            padding: 10px;
            border: 2px solid #dc3545;
            border-radius: 5px;
            background-color: #fce4e4;
        }
        
        /* Stili per la correzione */
        .corretta { background-color: #d4edda !important; border-color: #c3e6cb !important; font-weight: bold; }
        .sbagliata { background-color: #f8d7da !important; border-color: #f5c6cb !important; }
        .risultato { margin-top: 30px; padding: 25px; border: 2px solid #dc3545; background-color: #fff0f0; border-radius: 8px; text-align: center; }
        .motivazione { margin-top: 8px; font-size: 0.85em; color: #555; border-top: 1px dotted #ccc; padding-top: 5px; font-style: normal; text-align: left; }
        .bottone { display: block; width: 100%; padding: 15px; background-color: #dc3545; color: white; border: none; border-radius: 5px; font-size: 1.2em; cursor: pointer; margin-top: 30px; transition: background-color 0.3s; }
        .bottone:hover { background-color: #c82333; }
    </style>
    </head>
<body>
    
    <div class="quiz-container">
        <h1>Simulazione Prova di Italiano - Livello Base/Intermedio (Prova 1)</h1>
        
        <div id="timer-display">
            Tempo Rimanente: 30:00
        </div>
        
        <p>La prova consiste in 15 domande di comprensione e analisi linguistica.</p>
        
        <form id="invalsi-quiz">
            
            <h2>Testo A: Narrativo (1-5)</h2>
            <div class="sezione-testo">
                <div class="testo-lettura">
                    <p><strong>Il vecchio faro si ergeva sulla scogliera... [etc]</strong></p>
                </div>
            </div>
            
            <button type="submit" class="bottone">Controlla le Risposte e Ottieni il Punteggio Totale</button>
        </form>
        
        <div id="risultato-quiz" class="risultato" style="display: none;"></div>
    </div>
    <script>
        // Copia qui tutto il contenuto del tuo pannello JavaScript da JSFiddle (Logica, Risposte, Timer)
        
        // DURATA DEL QUIZ IN SECONDI (30 minuti = 1800 secondi)
        const DURATA_SECONDI = 1800; 
        let tempoRimanente = DURATA_SECONDI;
        let timerInterval;

        // DEFINIZIONE DELLE RISPOSTE CORRETTE 
        const risposteCorrette = {
            q1: { index: 1, motivazione: "La fragilità dell'imbarcazione rispecchia l'inquietudine di Luca, che vede la sua vita come 'fragile quanto l'imbarcazione'." },
            q2: { index: 1, motivazione: "La presenza di 'come' introduce un paragone esplicito, tipico della Similitudine." },
            q3: { index: 2, motivazione: "Il mare, parlando 'una lingua troppo forte', gli ricorda 'la sua stessa inquietudine', amplificandola invece di zittirla." },
            q4: { index: 1, motivazione: "Il 'che' sostituisce il nome 'nave' e svolge la funzione di soggetto del verbo 'lottava'." },
            q5: { index: 1, motivazione: "Sferzare significa colpire con violenza, in modo figurato per descrivere l'azione forte del vento." },
            q6: { index: 2, motivazione: "Il testo afferma: 'ha trasformato radicalmente non solo i metodi di produzione ma anche la struttura sociale'." },
            q7: { index: 2, motivazione: "Il testo specifica: 'ha accelerato i trasporti e la produzione'." },
            q8: { index: 1, motivazione: "Il sostantivo 'sintomo' (assenza di diritti) è un nome che qualifica il sistema economico, funzionando da Apposizione." },
            q9: { index: 1, motivazione: "Il sistema economico non teneva conto dei bisogni e dei diritti dei lavoratori (disattento al fattore umano)." },
            q10: { index: 2, motivazione: "Il proletariato è la classe lavoratrice che vive nelle città e dipende dal salario." },
            q11: { index: 1, motivazione: "La tesi è introdotta come 'inevitabile progresso' e confermata nella conclusione come 'scelta necessaria'." },
            q12: { index: 1, motivazione: "L'argomento principale a favore è: 'aggiornamenti in tempo reale e riduzione dei costi'." },
            q13: { index: 1, motivazione: "L'avversativa 'Tuttavia' introduce l'opinione contraria (antitesi)." },
            q14: { index: 2, motivazione: "La proposizione implicita al gerundio ('rendendo') ha funzione modale/strumentale." },
            q15: { index: 2, motivazione: "Progresso indica un avanzamento o un miglioramento." }
        };

        // --- FUNZIONE PRINCIPALE DI CORREZIONE (non modificata) ---
        function correggiQuiz(event) {
            if (event) event.preventDefault(); 
            clearInterval(timerInterval); 
            let punteggio = 0;
            const totalDomande = 15;
            const form = document.getElementById('invalsi-quiz'); 
            const risultatiDiv = document.getElementById('risultato-quiz');
            risultatiDiv.innerHTML = ''; 
            
            const radioInputs = form.querySelectorAll('input[type="radio"]');
            radioInputs.forEach(input => { input.disabled = true; });
            
            const bottoneControllo = form.querySelector('.bottone');
            if (bottoneControllo) bottoneControllo.style.display = 'none';

            for (let i = 1; i <= totalDomande; i++) {
                const nomeDomanda = `q${i}`;
                const elementoDomanda = form.elements[nomeDomanda];
                if (!elementoDomanda) continue; 
                
                let rispostaUtente = "";
                const risposte = document.getElementsByName(nomeDomanda);
                for(let j = 0; j < risposte.length; j++) {
                    if(risposte[j].checked) {
                        rispostaUtente = risposte[j].value;
                        break;
                    }
                }
                
                const bloccoDomanda = document.querySelector(`.domanda-blocco[data-numero="${i}"]`);
                const opzioni = bloccoDomanda.querySelectorAll('.opzione-risposta');
                
                opzioni.forEach(opt => {
                    opt.classList.remove('corretta', 'sbagliata');
                    const motivazionePrecedente = opt.querySelector('.motivazione');
                    if (motivazionePrecedente) motivazionePrecedente.remove();
                });

                const corretta = risposteCorrette[nomeDomanda];
                const indiceCorretto = corretta.index;
                const motivazione = corretta.motivazione;
                const opzioneCorretta = opzioni[indiceCorretto];

                if (rispostaUtente !== "") {
                    if (parseInt(rispostaUtente) === indiceCorretto) {
                        punteggio++;
                        opzioni[rispostaUtente].classList.add('corretta');
                    } else {
                        opzioni[rispostaUtente].classList.add('sbagliata');
                        opzioneCorretta.classList.add('corretta');
                    }
                } else {
                     opzioneCorretta.classList.add('corretta');
                }

                const motivazioneElemento = document.createElement('div');
                motivazioneElemento.classList.add('motivazione');
                motivazioneElemento.innerHTML = `<strong>Risposta Corretta:</strong> ${motivazione}`;
                opzioneCorretta.appendChild(motivazioneElemento);
            }

            const punteggioPercentuale = ((punteggio / totalDomande) * 100).toFixed(2);
            
            risultatiDiv.style.display = 'block';
            risultatiDiv.innerHTML = `
                <h2>Risultato Prova 1</h2>
                <p style="font-size: 1.2em; font-weight: bold; color: #dc3545;">Hai totalizzato <strong>${punteggio}</strong> risposte corrette su ${totalDomande} totali.</p>
                <p style="font-size: 1.5em; font-weight: bold;">Percentuale: ${punteggioPercentuale}%</p>
                <p style="margin-top: 20px; font-size: 0.9em;">**Verifica ora le singole domande:** Le risposte evidenziate in <span style="color: #155724; font-weight: bold;">verde</span> sono quelle corrette (con motivazione). Le risposte da te selezionate evidenziate in <span style="color: #721c24; font-weight: bold;">rosso</span> sono sbagliate.</p>
            `;
            
            risultatiDiv.scrollIntoView({ behavior: 'smooth' });
        }

        // --- FUNZIONE TIMER (non modificata) ---
        function aggiornaTimer() {
            const display = document.getElementById('timer-display');
            
            if (tempoRimanente <= 0) {
                clearInterval(timerInterval);
                if (display) display.innerHTML = "Tempo Scaduto!";
                correggiQuiz(); 
                return;
            }

            const minuti = Math.floor(tempoRimanente / 60);
            const secondi = tempoRimanente % 60;

            const minutiString = String(minuti).padStart(2, '0');
            const secondiString = String(secondi).padStart(2, '0');

            if (display) display.innerHTML = `Tempo Rimanente: ${minutiString}:${secondiString}`;
            
            tempoRimanente--;
        }

        // Avvia il timer e assegna la funzione di correzione all'invio del form
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('invalsi-quiz').addEventListener('submit', correggiQuiz); 
            timerInterval = setInterval(aggiornaTimer, 1000);
        });
    </script>
    </body>
</html>
