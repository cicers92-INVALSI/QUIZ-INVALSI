<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulazione Prova di Italiano</title>
    
    <style>
        .quiz-container { max-width: 850px; margin: 20px auto; background: #ffffff; padding: 25px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); font-family: Arial, sans-serif !important; }
        .quiz-container h1 { text-align: center; color: #dc3545; border-bottom: 3px solid #dc3545; padding-bottom: 12px; margin-bottom: 30px; font-size: 1.8em !important; }
        .quiz-container h2 { color: #333; border-bottom: 1px solid #ccc; padding-bottom: 5px; margin-top: 40px; font-size: 1.5em !important; }
        .testo-lettura { border: 1px solid #ddd; padding: 15px; margin-bottom: 20px; background-color: #fce4e4; border-radius: 6px; font-style: italic; line-height: 1.4; }
        .domanda-blocco { margin-bottom: 30px; padding: 15px; border-left: 5px solid #dc3545; background-color: #f9f9f9; border-radius: 6px; }
        .domanda-blocco h3 { margin-top: 0; color: #dc3545; font-size: 1.1em !important; }
        .opzione-risposta { margin: 8px 0; padding: 12px; border: 1px solid #ddd; border-radius: 4px; cursor: pointer; transition: background-color 0.3s; display: block; }
        .opzione-risposta:hover { background-color: #e9e9e9; }
        
        /* Stili per il timer */
        #timer-display {
            text-align: center; 
            margin-bottom: 20px; 
            font-size: 1.5em !important; 
            font-weight: bold; 
            color: #dc3545;
            padding: 10px;
            border: 2px solid #dc3545;
            border-radius: 5px;
            background-color: #fce4e4;
        }
        
        /* Stili per la correzione */
        .corretta { background-color: #d4edda !important; border-color: #c3e6cb !important; font-weight: bold; }
        .sbagliata { background-color: #f8d7da !important; border-color: #f5c6cb !important; }
        .risultato { margin-top: 30px; padding: 25px; border: 2px solid #dc3545; background-color: #fff0f0; border-radius: 8px; text-align: center; }
        .motivazione { margin-top: 8px; font-size: 0.85em; color: #555; border-top: 1px dotted #ccc; padding-top: 5px; font-style: normal; text-align: left; }
        .bottone { display: block; width: 100%; padding: 15px; background-color: #dc3545; color: white; border: none; border-radius: 5px; font-size: 1.2em; cursor: pointer; margin-top: 30px; transition: background-color 0.3s; }
        .bottone:hover { background-color: #c82333; }
    </style>
</head>
<body>
    
    <div class="quiz-container">
        <h1>Simulazione Prova di Italiano - Livello Base/Intermedio (Prova 1)</h1>
        
        <div id="timer-display">
            Tempo Rimanente: 30:00
        </div>
        
        <p>La prova consiste in 15 domande di comprensione e analisi linguistica.</p>
        
        <form id="invalsi-quiz">
            
            <h2>Testo A: Narrativo (1-5)</h2>
            <div class="sezione-testo">
                <div class="testo-lettura">
                    <p>
                        **Il vecchio faro si ergeva sulla scogliera come un dito puntato verso il cielo tempestoso.**
                        Luca, seduto sul muretto, osservava la nave che lottava contro le onde, una battaglia muta e solitaria. Il vento gli sferzava il volto, portando con sé il sapore salmastro del mare. Era arrivato lì in cerca di silenzio, ma il mare parlava una lingua troppo forte, una lingua che gli ricordava la sua stessa inquietudine.
                        Si sentiva fragile quanto l'imbarcazione laggiù, destinato a navigare senza meta precisa.
                    </p>
                </div>
            </div>
            
            <div class="domanda-blocco" data-numero="1">
                <h3>Q1. Cosa suggerisce il paragone "Si sentiva fragile quanto l'imbarcazione"?</h3>
                <label class="opzione-risposta">
                    <input type="radio" name="q1" value="1">
                    La fragilità dell'esistenza di Luca.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q1" value="2">
                    Il bisogno di riparare la nave.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q1" value="3">
                    Il pericolo imminente di un naufragio.
                </label>
            </div>
            
            <div class="domanda-blocco" data-numero="2">
                <h3>Q2. Che figura retorica è usata in "come un dito puntato verso il cielo tempestoso"?</h3>
                <label class="opzione-risposta">
                    <input type="radio" name="q2" value="1">
                    Similitudine.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q2" value="2">
                    Metafora.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q2" value="3">
                    Iperbole.
                </label>
            </div>
            
            <div class="domanda-blocco" data-numero="3">
                <h3>Q3. Qual è l'effetto del mare su Luca?</h3>
                <label class="opzione-risposta">
                    <input type="radio" name="q3" value="1">
                    Gli dona la tranquillità cercata.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q3" value="2">
                    Amplifica il suo stato d'animo inquieto.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q3" value="3">
                    Lo distrae dai suoi pensieri.
                </label>
            </div>
            
            <div class="domanda-blocco" data-numero="4">
                <h3>Q4. Nell'espressione "la nave che lottava contro le onde", la parola "che" svolge la funzione di:</h3>
                <label class="opzione-risposta">
                    <input type="radio" name="q4" value="1">
                    Pronome relativo soggetto.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q4" value="2">
                    Congiunzione.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q4" value="3">
                    Pronome relativo complemento oggetto.
                </label>
            </div>
            
            <div class="domanda-blocco" data-numero="5">
                <h3>Q5. Il verbo "sferzava" significa:</h3>
                <label class="opzione-risposta">
                    <input type="radio" name="q5" value="1">
                    Colpire con violenza.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q5" value="2">
                    Accarezzare dolcemente.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q5" value="3">
                    Coprire o avvolgere.
                </label>
            </div>
            
            <h2>Testo B: Espositivo (6-10)</h2>
            <div class="sezione-testo">
                <div class="testo-lettura">
                    <p>
                        La Rivoluzione Industriale non è stata solo una trasformazione tecnologica, ma un fenomeno che ha trasformato radicalmente non solo i metodi di produzione ma anche la struttura sociale. L'introduzione delle macchine, in particolare della macchina a vapore, ha accelerato i trasporti e la produzione su larga scala. Tuttavia, questo progresso ha portato con sé l'alienazione del lavoratore e la nascita di un nuovo sistema economico, sintomo di una profonda disattenzione al fattore umano, che ha generato il fenomeno del proletariato urbano.
                    </p>
                </div>
            </div>
            
            <div class="domanda-blocco" data-numero="6">
                <h3>Q6. Qual è la duplice conseguenza della Rivoluzione Industriale secondo il testo?</h3>
                <label class="opzione-risposta">
                    <input type="radio" name="q6" value="1">
                    Solo la trasformazione tecnologica.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q6" value="2">
                    Trasformazione dei metodi di produzione e della struttura sociale.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q6" value="3">
                    Solo l'introduzione delle macchine.
                </label>
            </div>
            
            <div class="domanda-blocco" data-numero="7">
                <h3>Q7. L'introduzione della macchina a vapore ha principalmente:</h3>
                <label class="opzione-risposta">
                    <input type="radio" name="q7" value="1">
                    Rallentato la produzione artigianale.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q7" value="2">
                    Accelerato trasporti e produzione.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q7" value="3">
                    Eliminato la schiavitù.
                </label>
            </div>
            
            <div class="domanda-blocco" data-numero="8">
                <h3>Q8. Nella frase "...sistema economico, sintomo di una profonda disattenzione...", la parola "sintomo" svolge funzione di:</h3>
                <label class="opzione-risposta">
                    <input type="radio" name="q8" value="1">
                    Apposizione.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q8" value="2">
                    Complemento oggetto.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q8" value="3">
                    Aggettivo qualificativo.
                </label>
            </div>
            
            <div class="domanda-blocco" data-numero="9">
                <h3>Q9. Cosa si intende per "profonda disattenzione al fattore umano"?</h3>
                <label class="opzione-risposta">
                    <input type="radio" name="q9" value="1">
                    Il sistema economico non teneva conto dei bisogni e dei diritti dei lavoratori.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q9" value="2">
                    C'era troppa attenzione alle esigenze dei datori di lavoro.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q9" value="3">
                    I macchinari erano pericolosi.
                </label>
            </div>
            
            <div class="domanda-blocco" data-numero="10">
                <h3>Q10. Quale classe sociale viene menzionata come risultato di questa trasformazione?</h3>
                <label class="opzione-risposta">
                    <input type="radio" name="q10" value="1">
                    La borghesia rurale.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q10" value="2">
                    Il proletariato urbano.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q10" value="3">
                    L'aristocrazia.
                </label>
            </div>
            
            <h2>Analisi Linguistica e Ristrutturazione (11-15)</h2>
            
            <div class="domanda-blocco" data-numero="11">
                <h3>Q11. Se un saggio si apre con "L'inevitabile progresso del settore IT ha ridefinito il modo in cui lavoriamo", qual è la tesi principale?</h3>
                <label class="opzione-risposta">
                    <input type="radio" name="q11" value="1">
                    Il progresso IT ha avuto un impatto positivo sul lavoro.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q11" value="2">
                    L'IT ha solo complicato i metodi di lavoro.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q11" value="3">
                    La tecnologia non ha avuto un impatto significativo.
                </label>
            </div>
            
            <div class="domanda-blocco" data-numero="12">
                <h3>Q12. Quale tra i seguenti NON è un argomento a favore dell'uso dell'intelligenza artificiale (IA) in azienda?</h3>
                <label class="opzione-risposta">
                    <input type="radio" name="q12" value="1">
                    Aggiornamenti in tempo reale e riduzione dei costi.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q12" value="2">
                    Difficoltà nell'interpretazione dei dati complessi.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q12" value="3">
                    Automazione dei processi ripetitivi.
                </label>
            </div>
            
            <div class="domanda-blocco" data-numero="13">
                <h3>Q13. Quale congiunzione introduce l'antitesi in un testo argomentativo?</h3>
                <label class="opzione-risposta">
                    <input type="radio" name="q13" value="1">
                    Tuttavia.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q13" value="2">
                    Perciò.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q13" value="3">
                    Inoltre.
                </label>
            </div>
            
            <div class="domanda-blocco" data-numero="14">
                <h3>Q14. Nella frase: "Leggendo quel saggio, si è informato a fondo sulla storia, rendendo la sua preparazione completa", la proposizione al gerundio ha funzione:</h3>
                <label class="opzione-risposta">
                    <input type="radio" name="q14" value="1">
                    Temporale.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q14" value="2">
                    Modale/Strumentale.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q14" value="3">
                    Causale.
                </label>
            </div>
            
            <div class="domanda-blocco" data-numero="15">
                <h3>Q15. Qual è il sinonimo di "progresso" nel contesto scientifico?</h3>
                <label class="opzione-risposta">
                    <input type="radio" name="q15" value="1">
                    Regressione.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q15" value="2">
                    Avanzamento.
                </label>
                <label class="opzione-risposta">
                    <input type="radio" name="q15" value="3">
                    Stasi.
                </label>
            </div>
            
            <button type="submit" class="bottone">Controlla le Risposte e Ottieni il Punteggio Totale</button>
        </form>
        
        <div id="risultato-quiz" class="risultato" style="display: none;"></div>
    </div>
    
    <script>
        // DURATA DEL QUIZ IN SECONDI (30 minuti = 1800 secondi)
        const DURATA_SECONDI = 1800; 
        let tempoRimanente = DURATA_SECONDI;
        let timerInterval;

        // DEFINIZIONE DELLE RISPOSTE CORRETTE 
        const risposteCorrette = {
            q1: { index: 0, motivazione: "La fragilità dell'imbarcazione rispecchia l'inquietudine di Luca, che vede la sua vita come 'fragile quanto l'imbarcazione'." },
            q2: { index: 0, motivazione: "La presenza di 'come' introduce un paragone esplicito, tipico della Similitudine." },
            q3: { index: 1, motivazione: "Il mare, parlando 'una lingua troppo forte', gli ricorda 'la sua stessa inquietudine', amplificandola invece di zittirla." },
            q4: { index: 0, motivazione: "Il 'che' sostituisce il nome 'nave' e svolge la funzione di soggetto del verbo 'lottava'." },
            q5: { index: 0, motivazione: "Sferzare significa colpire con violenza, in modo figurato per descrivere l'azione forte del vento." },
            q6: { index: 1, motivazione: "Il testo afferma: 'ha trasformato radicalmente non solo i metodi di produzione ma anche la struttura sociale'." },
            q7: { index: 1, motivazione: "Il testo specifica: 'ha accelerato i trasporti e la produzione'." },
            q8: { index: 0, motivazione: "Il sostantivo 'sintomo' (assenza di diritti) è un nome che qualifica il sistema economico, funzionando da Apposizione." },
            q9: { index: 0, motivazione: "Il sistema economico non teneva conto dei bisogni e dei diritti dei lavoratori (disattento al fattore umano)." },
            q10: { index: 1, motivazione: "Il proletariato è la classe lavoratrice che vive nelle città e dipende dal salario." },
            q11: { index: 0, motivazione: "La tesi è introdotta come 'inevitabile progresso' e confermata nella conclusione come 'scelta necessaria'." },
            q12: { index: 1, motivazione: "Difficoltà nell'interpretazione dei dati complessi è un argomento CONTRO l'IA, mentre gli altri sono a favore." },
            q13: { index: 0, motivazione: "L'avversativa 'Tuttavia' introduce l'opinione contraria (antitesi)." },
            q14: { index: 1, motivazione: "La proposizione implicita al gerundio ('rendendo') ha funzione modale/strumentale." },
            q15: { index: 1, motivazione: "Progresso indica un avanzamento o un miglioramento (sinonimo: avanzamento)." }
        };

        // --- FUNZIONE PRINCIPALE DI CORREZIONE ---
        function correggiQuiz(event) {
            if (event) event.preventDefault(); 
            clearInterval(timerInterval); 
            let punteggio = 0;
            const totalDomande = 15;
            const form = document.getElementById('invalsi-quiz'); 
            const risultatiDiv = document.getElementById('risultato-quiz');
            risultatiDiv.innerHTML = ''; 
            
            const radioInputs = form.querySelectorAll('input[type="radio"]');
            radioInputs.forEach(input => { input.disabled = true; });
            
            const bottoneControllo = form.querySelector('.bottone');
            if (bottoneControllo) bottoneControllo.style.display = 'none';

            for (let i = 1; i <= totalDomande; i++) {
                const nomeDomanda = `q${i}`;
                const elementoDomanda = form.elements[nomeDomanda];
                if (!elementoDomanda) continue; 
                
                let rispostaUtente = "";
                const risposte = document.getElementsByName(nomeDomanda);
                for(let j = 0; j < risposte.length; j++) {
                    if(risposte[j].checked) {
                        rispostaUtente = risposte[j].value;
                        break;
                    }
                }
                
                const bloccoDomanda = document.querySelector(`.domanda-blocco[data-numero="${i}"]`);
                const opzioni = bloccoDomanda.querySelectorAll('.opzione-risposta');
                
                opzioni.forEach(opt => {
                    opt.classList.remove('corretta', 'sbagliata');
                    const motivazionePrecedente = opt.querySelector('.motivazione');
                    if (motivazionePrecedente) motivazionePrecedente.remove();
                });

                const corretta = risposteCorrette[nomeDomanda];
                const indiceCorretto = corretta.index;
                const motivazione = corretta.motivazione;
                const opzioneCorretta = opzioni[indiceCorretto];

                if (rispostaUtente !== "") {
                    // Controlla se la risposta data dall'utente corrisponde all'indice (0-based) corretto
                    if (parseInt(rispostaUtente) === indiceCorretto) {
                        punteggio++;
                        opzioni[rispostaUtente].classList.add('corretta');
                    } else {
                        // Risposta sbagliata: evidenzia l'errore dell'utente e mostra la corretta
                        opzioni[parseInt(rispostaUtente)].classList.add('sbagliata');
                        opzioneCorretta.classList.add('corretta');
                    }
                } else {
                     // Nessuna risposta data, mostra solo la corretta
                     opzioneCorretta.classList.add('corretta');
                }

                const motivazioneElemento = document.createElement('div');
                motivazioneElemento.classList.add('motivazione');
                motivazioneElemento.innerHTML = `<strong>Risposta Corretta:</strong> ${motivazione}`;
                opzioneCorretta.appendChild(motivazioneElemento);
            }

            const punteggioPercentuale = ((punteggio / totalDomande) * 100).toFixed(2);
            
            risultatiDiv.style.display = 'block';
            risultatiDiv.innerHTML = `
                <h2>Risultato Prova 1</h2>
                <p style="font-size: 1.2em; font-weight: bold; color: #dc3545;">Hai totalizzato <strong>${punteggio}</strong> risposte corrette su ${totalDomande} totali.</p>
                <p style="font-size: 1.5em; font-weight: bold;">Percentuale: ${punteggioPercentuale}%</p>
                <p style="margin-top: 20px; font-size: 0.9em;">**Verifica ora le singole domande:** Le risposte evidenziate in <span style="color: #155724; font-weight: bold;">verde</span> sono quelle corrette (con motivazione). Le risposte da te selezionate evidenziate in <span style="color: #721c24; font-weight: bold;">rosso</span> sono sbagliate.</p>
            `;
            
            risultatiDiv.scrollIntoView({ behavior: 'smooth' });
        }

        // --- FUNZIONE TIMER ---
        function aggiornaTimer() {
            const display = document.getElementById('timer-display');
            
            if (tempoRimanente <= 0) {
                clearInterval(timerInterval);
                if (display) display.innerHTML = "Tempo Scaduto!";
                correggiQuiz(); 
                return;
            }

            const minuti = Math.floor(tempoRimanente / 60);
            const secondi = tempoRimanente % 60;

            const minutiString = String(minuti).padStart(2, '0');
            const secondiString = String(secondi).padStart(2, '0');

            if (display) display.innerHTML = `Tempo Rimanente: ${minutiString}:${secondiString}`;
            
            tempoRimanente--;
        }

        // Avvia il timer e assegna la funzione di correzione all'invio del form
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('invalsi-quiz').addEventListener('submit', correggiQuiz); 
            timerInterval = setInterval(aggiornaTimer, 1000);
        });
    </script>
</body>
</html>
